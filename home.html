<!DOCTYPE html>
<html>
<head>
  <title>RAJA BET - Home</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<script>
/* ===== LOGIN CHECK ===== */
const user = localStorage.getItem("currentUser");
if (!user) {
  location.href = "login.html";
}

/* ===== LOAD USER DATA ===== */
let data = JSON.parse(localStorage.getItem("user_" + user));

/* ===== FIRST TIME BONUS ===== */
if (!data || data.balance === undefined) {
  data = {
    balance: 500
  };
  localStorage.setItem("user_" + user, JSON.stringify(data));
}
</script>

<!-- ===== HEADER ===== -->
<div class="header">ðŸ‘‘ RAJA BET</div>

<!-- ===== BALANCE ===== -->
<div class="balance-box">
  Welcome Bonus à§³500<br>
  Balance: à§³ <span id="bal">0</span>
</div>

<!-- ===== GAMES ===== -->
<div class="games">
  <div class="game" onclick="play('Lucky 7')">ðŸŽ° Lucky 7</div>
  <div class="game" onclick="play('Dice')">ðŸŽ² Dice</div>
  <div class="game" onclick="play('Spin')">ðŸ”„ Spin</div>
  <div class="game" onclick="play('Color')">ðŸ”´ Color</div>
</div>

<!-- ===== ACTION BUTTONS ===== -->
<button onclick="deposit()">âž• Deposit</button>
<button onclick="withdraw()">âž– Withdraw</button>
<button onclick="logout()">ðŸšª Logout</button>

<!-- ===== SCRIPT ===== -->
<script>
/* SHOW BALANCE */
document.getElementById("bal").innerText = data.balance;

/* PLAY GAME */
function play(name) {
  let win = Math.random() > 0.5;
  let amount = win ? 50 : -30;
  data.balance += amount;

  if (data.balance < 0) data.balance = 0;

  localStorage.setItem("user_" + user, JSON.stringify(data));
  document.getElementById("bal").innerText = data.balance;

  alert(name + (win ? " WIN +50" : " LOSE -30"));
}

/* DEPOSIT */
function deposit() {
  let amt = prompt("Enter deposit amount:");
  amt = Number(amt);

  if (amt > 0) {
    data.balance += amt;
    localStorage.setItem("user_" + user, JSON.stringify(data));
    document.getElementById("bal").innerText = data.balance;
    alert("Deposit successful");
  }
}

/* WITHDRAW */
function withdraw() {
  let amt = prompt("Enter withdraw amount:");
  amt = Number(amt);

  if (amt > 0 && amt <= data.balance) {
    data.balance -= amt;
    localStorage.setItem("user_" + user, JSON.stringify(data));
    document.getElementById("bal").innerText = data.balance;
    alert("Withdraw successful");
  } else {
    alert("Insufficient balance");
  }
}

/* LOGOUT */
function logout() {
  localStorage.removeItem("currentUser");
  location.href = "login.html";
}
</script>

</body>
</html>
